<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge"><title>DNS Should I Use DNSSEC - Chaosmatrix</title><meta name="viewport" content="width=device-width, initial-scale=1">
	<meta itemprop="name" content="DNS Should I Use DNSSEC">
<meta itemprop="description" content="Abstract WARNING DNSSEC can only works as expected when the resolver ensure the zone and the upstream nameserver support DNSSEC WARNING less 50% top-1m website/domain enable DNSSEC, most zone owned by google/amazon/microsoft &hellip; not support DNSSEC DNSSEC can only make sure the data that the resolver fetching is provided by the zone&rsquo;s owner (require resolver verify the signature) DNSSEC can detect (not prevent) dns hijacking only when resolver/client verify the signature As Owner/Server: Assess only use it when you pretty sure you need it, and can&rsquo;t replace with another way, and should base on the report that the use of DNSSEC validation for your customer&rsquo;s ISPs public resolvers use E2EE protocol to protect the communication between client and server instead of ensuring client get the right server&rsquo;s address try to use DNS-Over-HTTPS/DNS-Over-QUIC to prevent dns hijacking if you can control how client resolve domain, for example desktop/mobile app As Resolver: Recommend But Not Forcing Recursive Resolver: Recommend, try to add additional security check, like credit score of ip address to detect dns hijacking Forward Resolver: Not Recommend, try to communicate with upstream nameserver with E2EE protocol, use DNSSEC only for the zone that pretty sure has full DNSSEC support and sensitive zone (like bank, shop) Basic DNSSEC strengthens authentication in DNS using digital signatures based on public key cryptography."><meta itemprop="datePublished" content="2022-08-08T21:05:18+08:00" />
<meta itemprop="dateModified" content="2022-08-08T21:05:18+08:00" />
<meta itemprop="wordCount" content="430">
<meta itemprop="keywords" content="network,dns," /><meta property="og:title" content="DNS Should I Use DNSSEC" />
<meta property="og:description" content="Abstract WARNING DNSSEC can only works as expected when the resolver ensure the zone and the upstream nameserver support DNSSEC WARNING less 50% top-1m website/domain enable DNSSEC, most zone owned by google/amazon/microsoft &hellip; not support DNSSEC DNSSEC can only make sure the data that the resolver fetching is provided by the zone&rsquo;s owner (require resolver verify the signature) DNSSEC can detect (not prevent) dns hijacking only when resolver/client verify the signature As Owner/Server: Assess only use it when you pretty sure you need it, and can&rsquo;t replace with another way, and should base on the report that the use of DNSSEC validation for your customer&rsquo;s ISPs public resolvers use E2EE protocol to protect the communication between client and server instead of ensuring client get the right server&rsquo;s address try to use DNS-Over-HTTPS/DNS-Over-QUIC to prevent dns hijacking if you can control how client resolve domain, for example desktop/mobile app As Resolver: Recommend But Not Forcing Recursive Resolver: Recommend, try to add additional security check, like credit score of ip address to detect dns hijacking Forward Resolver: Not Recommend, try to communicate with upstream nameserver with E2EE protocol, use DNSSEC only for the zone that pretty sure has full DNSSEC support and sensitive zone (like bank, shop) Basic DNSSEC strengthens authentication in DNS using digital signatures based on public key cryptography." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://chaosmatrix.github.io/blog/dns_should_i_use_dnssec/" /><meta property="article:section" content="blog" />
<meta property="article:published_time" content="2022-08-08T21:05:18+08:00" />
<meta property="article:modified_time" content="2022-08-08T21:05:18+08:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="DNS Should I Use DNSSEC"/>
<meta name="twitter:description" content="Abstract WARNING DNSSEC can only works as expected when the resolver ensure the zone and the upstream nameserver support DNSSEC WARNING less 50% top-1m website/domain enable DNSSEC, most zone owned by google/amazon/microsoft &hellip; not support DNSSEC DNSSEC can only make sure the data that the resolver fetching is provided by the zone&rsquo;s owner (require resolver verify the signature) DNSSEC can detect (not prevent) dns hijacking only when resolver/client verify the signature As Owner/Server: Assess only use it when you pretty sure you need it, and can&rsquo;t replace with another way, and should base on the report that the use of DNSSEC validation for your customer&rsquo;s ISPs public resolvers use E2EE protocol to protect the communication between client and server instead of ensuring client get the right server&rsquo;s address try to use DNS-Over-HTTPS/DNS-Over-QUIC to prevent dns hijacking if you can control how client resolve domain, for example desktop/mobile app As Resolver: Recommend But Not Forcing Recursive Resolver: Recommend, try to add additional security check, like credit score of ip address to detect dns hijacking Forward Resolver: Not Recommend, try to communicate with upstream nameserver with E2EE protocol, use DNSSEC only for the zone that pretty sure has full DNSSEC support and sensitive zone (like bank, shop) Basic DNSSEC strengthens authentication in DNS using digital signatures based on public key cryptography."/>
<link href='https://fonts.googleapis.com/css?family=Playfair+Display:700' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" media="screen" href="https://chaosmatrix.github.io/css/normalize.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="https://chaosmatrix.github.io/css/main.css" />

        <link id="dark-scheme" rel="stylesheet" type="text/css" href="https://chaosmatrix.github.io/css/dark.css" />

	<script src="https://chaosmatrix.github.io/js/feather.min.js"></script>
	
		<script src="https://chaosmatrix.github.io/js/main.js"></script>
</head>

<body>
	<div class="container wrapper">
		<div class="header">
	
		<div class="avatar">
			<a href="https://chaosmatrix.github.io/">
				<img src="https://avatars.githubusercontent.com/u/37551759?v=4" alt="Chaosmatrix" />
			</a>
		</div>
	
	<h1 class="site-title"><a href="https://chaosmatrix.github.io/">Chaosmatrix</a></h1>
	<div class="site-description"><p>Thoughts come and go, words stay eternal</p><nav class="nav social">
			<ul class="flat"><li><a href="https://github.com/chaosmatrix" title="Github"><i data-feather="github"></i></a></li><li><a href="#" class="scheme-toggle" id="scheme-toggle"></a></li></ul>
		</nav>
	</div>

	<nav class="nav">
		<ul class="flat">
			
			<li>
				<a href="/blog">Blog</a>
			</li>
			
			<li>
				<a href="/wasm">Wasm</a>
			</li>
			
		</ul>
	</nav>
</div>


		<div class="post">
			<div class="post-header">
				
					<div class="meta">
						<div class="date">
							<span class="day">08</span>
							<span class="rest">Aug 2022</span>
						</div>
					</div>
				
				<div class="matter">
					<h1 class="title">DNS Should I Use DNSSEC</h1>
				</div>
			</div>
					
			<div class="markdown">
				<h2 id="abstract">Abstract</h2>
<ol>
<li><strong><code>WARNING</code></strong> DNSSEC can only works as expected when the resolver ensure the zone and the upstream nameserver support DNSSEC</li>
<li><strong><code>WARNING</code></strong> less 50% top-1m website/domain enable DNSSEC, most zone owned by google/amazon/microsoft &hellip; not support DNSSEC</li>
<li>DNSSEC can only make sure the data that the resolver fetching is provided by the zone&rsquo;s owner (require resolver verify the signature)</li>
<li>DNSSEC can detect (<em>not prevent</em>) dns hijacking only when resolver/client verify the signature</li>
<li>As Owner/Server: <strong><code>Assess</code></strong>
<ol>
<li>only use it when you pretty sure you need it, and can&rsquo;t replace with another way, and should base on the report that <em><a href="https://stats.labs.apnic.net/dnssec/XA">the use of DNSSEC validation for your customer&rsquo;s ISPs public resolvers</a></em></li>
<li>use E2EE protocol to protect the communication between client and server instead of ensuring client get the right server&rsquo;s address</li>
<li>try to use DNS-Over-HTTPS/DNS-Over-QUIC to prevent dns hijacking if you can control how client resolve domain, for example desktop/mobile app</li>
</ol>
</li>
<li>As Resolver: <strong><code>Recommend But Not Forcing</code></strong>
<ol>
<li>Recursive Resolver: <strong><code>Recommend</code></strong>, try to add additional security check, like credit score of ip address to detect dns hijacking</li>
<li>Forward Resolver: <strong><code>Not Recommend</code></strong>, try to communicate with upstream nameserver with E2EE protocol, use DNSSEC only for the zone that pretty sure has full DNSSEC support and sensitive zone (like bank, shop)</li>
</ol>
</li>
</ol>
<h2 id="basic">Basic</h2>
<p>DNSSEC strengthens authentication in DNS using <strong><code>digital signatures</code></strong> based on <strong><code>public key cryptography</code></strong>. With DNSSEC, it&rsquo;s not DNS queries and responses themselves that are cryptographically signed, but rather DNS data itself is signed by the owner of the data.</p>
<p><strong>What DNSSEC Provide:</strong></p>
<ol>
<li><strong><code>Data origin authentication</code></strong></li>
<li><strong><code>Data integrity protection</code></strong></li>
</ol>
<p><strong>How Resolver Get And Verify Zone&rsquo;s Public Key:</strong></p>
<ol>
<li>use dns query with record type <em>DNSKEY</em></li>
<li>a zone&rsquo;s <em>DNSKEY</em> record which contain Public Key is cryptographically signed by <em>parent zone&rsquo;s</em> private key until root, like a <em>chain of trust</em></li>
<li>the root KSK (Key Signing Key) will be fetch from <a href="https://www.iana.org/dnssec">IANA</a></li>
</ol>
<p><strong>How Resolver Ensure A Zone Support DNSSEC:</strong></p>
<ol>
<li>no official way, depend on resolver/client keep a dnssec supported zone whitelist (inflexible)</li>
<li><strong><code>Think</code></strong> use additional record type (for example <em>DNSSEC</em>) to identify a zone support DNSSEC, like record type <em>HTTPS</em></li>
</ol>
<p><strong>Disadvantages of DNSSEC:</strong></p>
<ol>
<li>complexity breeds fragility</li>
<li>there no official way to know a zone support DNSSEC, attacker can break this security by disable DNSSEC with dns hijacking</li>
<li>no many zones/resolvers support DNSSEC (less 50%)</li>
</ol>
<h2 id="reference">Reference</h2>
<ol>
<li><a href="https://www.icann.org/resources/pages/dnssec-what-is-it-why-important-2019-03-05-en">DNSSEC – What Is It and Why Is It Important?</a></li>
<li><a href="https://dnsinstitute.com/research/2020/banks-dnssec-202010.html">DNSSEC Report 2020-10 for Top 100 Banking Institutions</a></li>
<li><a href="https://stats.research.icann.org/dns/tld_report/">TLD DNSSEC Report</a></li>
<li><a href="https://dnssec-analyzer.verisignlabs.com/">online dnssec-analyzer tool</a></li>
<li><a href="https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-server-2012-R2-and-2012/jj200221(v=ws.11)">Overview of DNSSEC</a></li>
<li><a href="https://www.internic.net/domain/root.zone">DNSSEC trust anchor</a></li>
<li><a href="https://github.com/iana-org/get-trust-anchor">get-trust-anchor</a></li>
<li><a href="http://s3.amazonaws.com/alexa-static/top-1m.csv.zip">alexa top-1m domain, never update any more</a></li>
<li><a href="https://s3-us-west-1.amazonaws.com/umbrella-static/top-1m.csv.zip">Umbrella top-1m domain</a></li>
<li><a href="https://s3-us-west-1.amazonaws.com/umbrella-static/index.html">Umbrella Popularity List</a></li>
<li><a href="https://dnsinstitute.com/documentation/dnssec-guide/ch06s06.html">Disadvantages of DNSSEC</a></li>
<li><a href="https://stats.labs.apnic.net/dnssec/XA">Use of DNSSEC Validation for World (XA)</a></li>
</ol>

			</div>

			<div class="tags">
				
					
						<ul class="flat">
							
							<li><a href="/tags/network">network</a></li>
							
							<li><a href="/tags/dns">dns</a></li>
							
						</ul>
					
				
			</div></div>
	</div>
	<div class="footer wrapper">
	<nav class="nav">
		<div>2022  © Copyright chaosmatrix |  <a href="https://github.com/knadh/hugo-ink">Ink</a> theme on <a href="https://gohugo.io">Hugo</a></div>
	</nav>
</div>

<script>feather.replace()</script>
</body>
</html>
